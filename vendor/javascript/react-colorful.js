import o,{useRef as n,useMemo as a,useEffect as l,useState as m,useCallback as _,useLayoutEffect as M}from"react";function u(){return(u=Object.assign||function(o){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(o[l]=a[l])}return o}).apply(this,arguments)}function c(o,n){if(null==o)return{};var a,l,m={},_=Object.keys(o);for(l=0;l<_.length;l++)n.indexOf(a=_[l])>=0||(m[a]=o[a]);return m}function i(o){var a=n(o),l=n((function(o){a.current&&a.current(o)}));return a.current=o,l.current}var s=function(o,n,a){return void 0===n&&(n=0),void 0===a&&(a=1),o>a?a:o<n?n:o},f=function(o){return"touches"in o},v=function(o){return o&&o.ownerDocument.defaultView||self},d=function(o,n,a){var l=o.getBoundingClientRect(),m=f(n)?function(o,n){for(var a=0;a<o.length;a++)if(o[a].identifier===n)return o[a];return o[0]}(n.touches,a):n;return{left:s((m.pageX-(l.left+v(o).pageXOffset))/l.width),top:s((m.pageY-(l.top+v(o).pageYOffset))/l.height)}},h=function(o){!f(o)&&o.preventDefault()},S=o.memo((function(m){var _=m.onMove,M=m.onKey,S=c(m,["onMove","onKey"]),j=n(null),B=i(_),R=i(M),T=n(null),V=n(!1),J=a((function(){var e=function(o){h(o),(f(o)?o.touches.length>0:o.buttons>0)&&j.current?B(d(j.current,o,T.current)):t(!1)},r=function(){return t(!1)};function t(o){var n=V.current,a=v(j.current),l=o?a.addEventListener:a.removeEventListener;l(n?"touchmove":"mousemove",e),l(n?"touchend":"mouseup",r)}return[function(o){var n=o.nativeEvent,a=j.current;if(a&&(h(n),!function(o,n){return n&&!f(o)}(n,V.current)&&a)){if(f(n)){V.current=!0;var l=n.changedTouches||[];l.length&&(T.current=l[0].identifier)}a.focus(),B(d(a,n,T.current)),t(!0)}},function(o){var n=o.which||o.keyCode;n<37||n>40||(o.preventDefault(),R({left:39===n?.05:37===n?-.05:0,top:40===n?.05:38===n?-.05:0}))},t]}),[R,B]),W=J[0],te=J[1],oe=J[2];return l((function(){return oe}),[oe]),o.createElement("div",u({},S,{onTouchStart:W,onMouseDown:W,className:"react-colorful__interactive",ref:j,onKeyDown:te,tabIndex:0,role:"slider"}))})),g=function(o){return o.filter(Boolean).join(" ")},p=function(n){var a=n.color,l=n.left,m=n.top,_=void 0===m?.5:m,M=g(["react-colorful__pointer",n.className]);return o.createElement("div",{className:M,style:{top:100*_+"%",left:100*l+"%"}},o.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:a}}))},b=function(o,n,a){return void 0===n&&(n=0),void 0===a&&(a=Math.pow(10,n)),Math.round(a*o)/a},j={grad:.9,turn:360,rad:360/(2*Math.PI)},x=function(o){return L(C(o))},C=function(o){return"#"===o[0]&&(o=o.substring(1)),o.length<6?{r:parseInt(o[0]+o[0],16),g:parseInt(o[1]+o[1],16),b:parseInt(o[2]+o[2],16),a:4===o.length?b(parseInt(o[3]+o[3],16)/255,2):1}:{r:parseInt(o.substring(0,2),16),g:parseInt(o.substring(2,4),16),b:parseInt(o.substring(4,6),16),a:8===o.length?b(parseInt(o.substring(6,8),16)/255,2):1}},E=function(o,n){return void 0===n&&(n="deg"),Number(o)*(j[n]||1)},H=function(o){var n=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(o);return n?N({h:E(n[1],n[2]),s:Number(n[3]),l:Number(n[4]),a:void 0===n[5]?1:Number(n[5])/(n[6]?100:1)}):{h:0,s:0,v:0,a:1}},B=H,N=function(o){var n=o.s,a=o.l;return{h:o.h,s:(n*=(a<50?a:100-a)/100)>0?2*n/(a+n)*100:0,v:a+n,a:o.a}},w=function(o){return K(I(o))},y=function(o){var n=o.s,a=o.v,l=o.a,m=(200-n)*a/100;return{h:b(o.h),s:b(m>0&&m<200?n*a/100/(m<=100?m:200-m)*100:0),l:b(m/2),a:b(l,2)}},q=function(o){var n=y(o);return"hsl("+n.h+", "+n.s+"%, "+n.l+"%)"},k=function(o){var n=y(o);return"hsla("+n.h+", "+n.s+"%, "+n.l+"%, "+n.a+")"},I=function(o){var n=o.h,a=o.s,l=o.v,m=o.a;n=n/360*6,a/=100,l/=100;var _=Math.floor(n),M=l*(1-a),S=l*(1-(n-_)*a),j=l*(1-(1-n+_)*a),B=_%6;return{r:b(255*[l,S,M,M,j,l][B]),g:b(255*[j,l,l,S,M,M][B]),b:b(255*[M,M,j,l,l,S][B]),a:b(m,2)}},O=function(o){var n=/hsva?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(o);return n?A({h:E(n[1],n[2]),s:Number(n[3]),v:Number(n[4]),a:void 0===n[5]?1:Number(n[5])/(n[6]?100:1)}):{h:0,s:0,v:0,a:1}},R=O,z=function(o){var n=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(o);return n?L({r:Number(n[1])/(n[2]?100/255:1),g:Number(n[3])/(n[4]?100/255:1),b:Number(n[5])/(n[6]?100/255:1),a:void 0===n[7]?1:Number(n[7])/(n[8]?100:1)}):{h:0,s:0,v:0,a:1}},T=z,D=function(o){var n=o.toString(16);return n.length<2?"0"+n:n},K=function(o){var n=o.r,a=o.g,l=o.b,m=o.a,_=m<1?D(b(255*m)):"";return"#"+D(n)+D(a)+D(l)+_},L=function(o){var n=o.r,a=o.g,l=o.b,m=o.a,_=Math.max(n,a,l),M=_-Math.min(n,a,l),S=M?_===n?(a-l)/M:_===a?2+(l-n)/M:4+(n-a)/M:0;return{h:b(60*(S<0?S+6:S)),s:b(_?M/_*100:0),v:b(_/255*100),a:m}},A=function(o){return{h:b(o.h),s:b(o.s),v:b(o.v),a:b(o.a,2)}},V=o.memo((function(n){var a=n.hue,l=n.onChange,m=g(["react-colorful__hue",n.className]);return o.createElement("div",{className:m},o.createElement(S,{onMove:function(o){l({h:360*o.left})},onKey:function(o){l({h:s(a+360*o.left,0,360)})},"aria-label":"Hue","aria-valuenow":b(a),"aria-valuemax":"360","aria-valuemin":"0"},o.createElement(p,{className:"react-colorful__hue-pointer",left:a/360,color:q({h:a,s:100,v:100,a:1})})))})),J=o.memo((function(n){var a=n.hsva,l=n.onChange,m={backgroundColor:q({h:a.h,s:100,v:100,a:1})};return o.createElement("div",{className:"react-colorful__saturation",style:m},o.createElement(S,{onMove:function(o){l({s:100*o.left,v:100-100*o.top})},onKey:function(o){l({s:s(a.s+100*o.left,0,100),v:s(a.v-100*o.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+b(a.s)+"%, Brightness "+b(a.v)+"%"},o.createElement(p,{className:"react-colorful__saturation-pointer",top:1-a.v/100,left:a.s/100,color:q(a)})))})),F=function(o,n){if(o===n)return!0;for(var a in o)if(o[a]!==n[a])return!1;return!0},P=function(o,n){return o.replace(/\s/g,"")===n.replace(/\s/g,"")},X=function(o,n){return o.toLowerCase()===n.toLowerCase()||F(C(o),C(n))};function Y(o,a,M){var S=i(M),j=m((function(){return o.toHsva(a)})),B=j[0],R=j[1],T=n({color:a,hsva:B});l((function(){if(!o.equal(a,T.current.color)){var n=o.toHsva(a);T.current={hsva:n,color:a},R(n)}}),[a,o]),l((function(){var n;F(B,T.current.hsva)||o.equal(n=o.fromHsva(B),T.current.color)||(T.current={hsva:B,color:n},S(n))}),[B,o,S]);var V=_((function(o){R((function(n){return Object.assign({},n,o)}))}),[]);return[B,V]}var W,te="undefined"!=typeof window?M:l,$=function(){return W||("undefined"!=typeof __webpack_nonce__?__webpack_nonce__:void 0)},G=function(o){W=o},oe=new Map,Q=function(o){te((function(){var n=o.current?o.current.ownerDocument:document;if(void 0!==n&&!oe.has(n)){var a=n.createElement("style");a.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',oe.set(n,a);var l=$();l&&a.setAttribute("nonce",l),n.head.appendChild(a)}}),[])},U=function(a){var l=a.className,m=a.colorModel,_=a.color,M=void 0===_?m.defaultColor:_,S=a.onChange,j=c(a,["className","colorModel","color","onChange"]),B=n(null);Q(B);var R=Y(m,M,S),T=R[0],W=R[1],te=g(["react-colorful",l]);return o.createElement("div",u({},j,{ref:B,className:te}),o.createElement(J,{hsva:T,onChange:W}),o.createElement(V,{hue:T.h,onChange:W,className:"react-colorful__last-control"}))},le={defaultColor:"000",toHsva:x,fromHsva:function(o){return w({h:o.h,s:o.s,v:o.v,a:1})},equal:X},Z=function(n){return o.createElement(U,u({},n,{colorModel:le}))},ee=function(n){var a=n.className,l=n.hsva,m=n.onChange,_={backgroundImage:"linear-gradient(90deg, "+k(Object.assign({},l,{a:0}))+", "+k(Object.assign({},l,{a:1}))+")"},M=g(["react-colorful__alpha",a]),j=b(100*l.a);return o.createElement("div",{className:M},o.createElement("div",{className:"react-colorful__alpha-gradient",style:_}),o.createElement(S,{onMove:function(o){m({a:o.left})},onKey:function(o){m({a:s(l.a+o.left)})},"aria-label":"Alpha","aria-valuetext":j+"%","aria-valuenow":j,"aria-valuemin":"0","aria-valuemax":"100"},o.createElement(p,{className:"react-colorful__alpha-pointer",left:l.a,color:k(l)})))},re=function(a){var l=a.className,m=a.colorModel,_=a.color,M=void 0===_?m.defaultColor:_,S=a.onChange,j=c(a,["className","colorModel","color","onChange"]),B=n(null);Q(B);var R=Y(m,M,S),T=R[0],W=R[1],te=g(["react-colorful",l]);return o.createElement("div",u({},j,{ref:B,className:te}),o.createElement(J,{hsva:T,onChange:W}),o.createElement(V,{hue:T.h,onChange:W}),o.createElement(ee,{hsva:T,onChange:W,className:"react-colorful__last-control"}))},ce={defaultColor:"0001",toHsva:x,fromHsva:w,equal:X},ne=function(n){return o.createElement(re,u({},n,{colorModel:ce}))},se={defaultColor:{h:0,s:0,l:0,a:1},toHsva:N,fromHsva:y,equal:F},ae=function(n){return o.createElement(re,u({},n,{colorModel:se}))},ve={defaultColor:"hsla(0, 0%, 0%, 1)",toHsva:H,fromHsva:k,equal:P},ue=function(n){return o.createElement(re,u({},n,{colorModel:ve}))},he={defaultColor:{h:0,s:0,l:0},toHsva:function(o){return N({h:o.h,s:o.s,l:o.l,a:1})},fromHsva:function(o){return{h:(n=y(o)).h,s:n.s,l:n.l};var n},equal:F},ie=function(n){return o.createElement(U,u({},n,{colorModel:he}))},ge={defaultColor:"hsl(0, 0%, 0%)",toHsva:B,fromHsva:q,equal:P},fe=function(n){return o.createElement(U,u({},n,{colorModel:ge}))},be={defaultColor:{h:0,s:0,v:0,a:1},toHsva:function(o){return o},fromHsva:A,equal:F},de=function(n){return o.createElement(re,u({},n,{colorModel:be}))},xe={defaultColor:"hsva(0, 0%, 0%, 1)",toHsva:O,fromHsva:function(o){var n=A(o);return"hsva("+n.h+", "+n.s+"%, "+n.v+"%, "+n.a+")"},equal:P},me=function(n){return o.createElement(re,u({},n,{colorModel:xe}))},Ee={defaultColor:{h:0,s:0,v:0},toHsva:function(o){return{h:o.h,s:o.s,v:o.v,a:1}},fromHsva:function(o){var n=A(o);return{h:n.h,s:n.s,v:n.v}},equal:F},pe=function(n){return o.createElement(U,u({},n,{colorModel:Ee}))},Me={defaultColor:"hsv(0, 0%, 0%)",toHsva:R,fromHsva:function(o){var n=A(o);return"hsv("+n.h+", "+n.s+"%, "+n.v+"%)"},equal:P},_e=function(n){return o.createElement(U,u({},n,{colorModel:Me}))},we={defaultColor:{r:0,g:0,b:0,a:1},toHsva:L,fromHsva:I,equal:F},Ce=function(n){return o.createElement(re,u({},n,{colorModel:we}))},qe={defaultColor:"rgba(0, 0, 0, 1)",toHsva:z,fromHsva:function(o){var n=I(o);return"rgba("+n.r+", "+n.g+", "+n.b+", "+n.a+")"},equal:P},He=function(n){return o.createElement(re,u({},n,{colorModel:qe}))},Pe={defaultColor:{r:0,g:0,b:0},toHsva:function(o){return L({r:o.r,g:o.g,b:o.b,a:1})},fromHsva:function(o){return{r:(n=I(o)).r,g:n.g,b:n.b};var n},equal:F},Ne=function(n){return o.createElement(U,u({},n,{colorModel:Pe}))},Se={defaultColor:"rgb(0, 0, 0)",toHsva:T,fromHsva:function(o){var n=I(o);return"rgb("+n.r+", "+n.g+", "+n.b+")"},equal:P},ye=function(n){return o.createElement(U,u({},n,{colorModel:Se}))},je=/^#?([0-9A-F]{3,8})$/i,ke=function(n){var a=n.color,M=void 0===a?"":a,S=n.onChange,j=n.onBlur,B=n.escape,R=n.validate,T=n.format,V=n.process,J=c(n,["color","onChange","onBlur","escape","validate","format","process"]),W=m((function(){return B(M)})),te=W[0],oe=W[1],le=i(S),ce=i(j),se=_((function(o){var n=B(o.target.value);oe(n),R(n)&&le(V?V(n):n)}),[B,V,R,le]),ve=_((function(o){R(o.target.value)||oe(B(M)),ce(o)}),[M,B,R,ce]);return l((function(){oe(B(M))}),[M,B]),o.createElement("input",u({},J,{value:T?T(te):te,spellCheck:"false",onChange:se,onBlur:ve}))},Ie=function(o){return"#"+o},Oe=function(n){var a=n.prefixed,l=n.alpha,m=c(n,["prefixed","alpha"]),M=_((function(o){return o.replace(/([^0-9A-F]+)/gi,"").substring(0,l?8:6)}),[l]),S=_((function(o){return function(o,n){var a=je.exec(o),l=a?a[1].length:0;return 3===l||6===l||!!n&&4===l||!!n&&8===l}(o,l)}),[l]);return o.createElement(ke,u({},m,{escape:M,format:a?Ie:void 0,process:Ie,validate:S}))};export{ne as HexAlphaColorPicker,Oe as HexColorInput,Z as HexColorPicker,ie as HslColorPicker,fe as HslStringColorPicker,ae as HslaColorPicker,ue as HslaStringColorPicker,pe as HsvColorPicker,_e as HsvStringColorPicker,de as HsvaColorPicker,me as HsvaStringColorPicker,Ne as RgbColorPicker,ye as RgbStringColorPicker,Ce as RgbaColorPicker,He as RgbaStringColorPicker,G as setNonce};

